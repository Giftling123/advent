<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Love Advent Calendar</title>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script>
        (function () {
            emailjs.init({ publicKey: "vU08jmqeIr2iJqvO2" });
        })();
        let currentEnvelope = null;
        function addCloseButtonToDiv(div) {
            let btn = document.createElement("button");
            btn.innerText = "Return to Main Menu";
            btn.onclick = function () {
                div.remove();
                if (currentEnvelope) {
                    currentEnvelope.classList.remove("open");
                    currentEnvelope = null;
                }
            };
            div.appendChild(btn);
        }
        function openEnvelope(index) {
            const exp = document.createElement("div");
            exp.classList.add("expanded");
            switch (index) {
                case 0:
                    exp.innerHTML = `
                <h2>You are my soul</h2>
                <div style="display: flex; flex-wrap: wrap; align-items: center; justify-content: center;">
                  <img src="ILY_Hug.gif" alt="Love" style="max-width:200px; margin: 0 20px;">
                  <div style="max-width:600px; text-align: left;">
                    <p>My Dearest Noni, My Pumpkin, My Queen,</p>
                    <p>I don’t even know where to begin, because how do I put into words what you mean to me? You’re not just my love; you’re my everything. My heart, soul, and reason for smiling even on the hardest days. Every time I look at you, I see my future, our future, and it’s so bright, so beautiful, that it takes my breath away.</p>
                    <p>Nono, I want you to know something: I love you more than words could ever express. I love the way you laugh, the way your eyes light up when you’re happy, and even the way you pout when you’re upset. I love every single thing about you, even the little quirks that make you you. You’re my perfect match, my other half, and I can’t imagine my life without you.</p>
                    <p>I want to marry you, Nonoty. I want to wake up next to you every morning and fall asleep with you in my arms every night. I want to build a life with you, a life full of love, laughter, and endless adventures. I want to make you happy, not just today, but every single day for the rest of our lives. You deserve the world, my queen, and I promise to do everything in my power to give it to you.</p>
                    <p>You’re my forever, Noni. My always. My one and only. I love you more than anything in this world, and I can’t wait to spend the rest of my life loving you.</p>
                  </div>
                  <img src="ILY_Hug.gif" alt="Love" style="max-width:200px; margin: 0 20px;">
                </div>
              `;
                    addCloseButtonToDiv(exp);
                    break;
                case 1:
                    exp.innerHTML = `<h2>Let's venture for a little</h2>`;
                    startAdventure(exp);
                    break;
                case 2:
                    exp.innerHTML = `<h2>A few puzzles...</h2>
                <div id="puzzle-container"></div>`;
                    addCloseButtonToDiv(exp);
                    const puzzles = [
                        { question: "Puzzle 1: I am taken from a mine and shut in a wooden case, from which I am never released, and yet I am used by almost every person. What am I?", answer: "pencil" },
                        { question: "Puzzle 2: What has keys but can't open locks?", answer: "piano" },
                        { question: "Puzzle 3: What has a head, a tail, is brown, and has no legs?", answer: "penny" },
                        { question: "Puzzle 4: What gets wetter the more it dries?", answer: "towel" }
                    ];
                    let currentPuzzle = 0;
                    function showPuzzle(index) {
                        const container = exp.querySelector("#puzzle-container");
                        container.innerHTML = "";
                        if (index >= puzzles.length) {
                            container.innerHTML = "<p>You did it! Just like I knew you would, because you're brilliant. Your mind amazes me, and your heart means everything to me.<br>I love you, not just for how smart and capable you are, but for the way you make my world brighter every single day. No puzzle could ever be as perfect as you!</p>";
                            return;
                        }
                        const qDiv = document.createElement("div");
                        qDiv.innerHTML = `
                  <p>${puzzles[index].question}</p>
                  <input type="text" id="puzzle-input" placeholder="Your answer">
                  <button id="puzzle-check">Submit</button>
                  <div id="puzzle-feedback" style="color:red;"></div>
                `;
                        container.appendChild(qDiv);
                        const btn = qDiv.querySelector("#puzzle-check"),
                            inp = qDiv.querySelector("#puzzle-input"),
                            fb = qDiv.querySelector("#puzzle-feedback");
                        btn.onclick = function () {
                            let ans = inp.value.trim().toLowerCase();
                            if (ans === puzzles[index].answer) {
                                showPuzzle(++currentPuzzle);
                            } else {
                                fb.innerText = "Try again!";
                            }
                        };
                    }
                    showPuzzle(currentPuzzle);
                    break;
                case 3:
                    exp.innerHTML = `
                <h2>Wordle Challenge</h2>
                <p>Guess the secret 5-letter word about us:</p>
                <p>You have 6 tries for each word.</p>
                <div id="wordle-grid"></div>
                <input type="text" id="wordle-input" maxlength="5" placeholder="Enter guess" style="text-transform: uppercase; font-size:18px; text-align:center;">
                <button id="wordle-submit">Submit Guess</button>
                <p id="wordle-message" style="color:red;"></p>
              `;
                    addCloseButtonToDiv(exp);
                    const wordlePuzzles = [
                        { word: "najma", successMsg: "YOU DID IT! ALMOST THERE~~~ BABY GIRLL!" },
                        { word: "lover", successMsg: "ALMOST THERE HONEYPIE WOOF WOOF! YOUR PUPPY LOVES YOU" },
                        { word: "honey", successMsg: "My dearest, every beat of my heart whispers your name. I love you more than words can say, and I long to kiss you and share every beautiful moment with you." }
                    ];
                    let currentPuzzleIndex = 0;
                    let guessCount = 0;
                    const grid = exp.querySelector("#wordle-grid"),
                        inputField = exp.querySelector("#wordle-input"),
                        submitButton = exp.querySelector("#wordle-submit"),
                        messageP = exp.querySelector("#wordle-message");

                    function resetPuzzle() {
                        guessCount = 0;
                        grid.innerHTML = "";
                        messageP.innerText = "";
                        inputField.disabled = false;
                        submitButton.disabled = false;
                        inputField.value = "";
                        inputField.focus();
                    }
                    function loadPuzzle() {
                        resetPuzzle();
                    }
                    loadPuzzle();
                    submitButton.onclick = function () {
                        let guess = inputField.value.toLowerCase();
                        if (guess.length !== 5) {
                            messageP.innerText = "Please enter a 5-letter word.";
                            return;
                        }
                        messageP.innerText = "";
                        let row = document.createElement("div");
                        row.style.display = "grid";
                        row.style.gridTemplateColumns = "repeat(5,50px)";
                        row.style.gap = "5px";
                        let secret = wordlePuzzles[currentPuzzleIndex].word;
                        for (let i = 0; i < 5; i++) {
                            let box = document.createElement("div");
                            box.classList.add("letter-box");
                            let letter = guess[i];
                            box.innerText = letter.toUpperCase();
                            if (letter === secret[i]) {
                                box.style.backgroundColor = "green";
                                box.style.color = "white";
                            } else if (secret.includes(letter)) {
                                box.style.backgroundColor = "gold";
                                box.style.color = "white";
                            } else {
                                box.style.backgroundColor = "lightgray";
                                box.style.color = "white";
                            }
                            row.appendChild(box);
                        }
                        grid.appendChild(row);
                        guessCount++;
                        inputField.value = "";
                        if (guess === secret) {
                            inputField.disabled = true;
                            submitButton.disabled = true;
                            messageP.style.color = "green";
                            messageP.innerText = wordlePuzzles[currentPuzzleIndex].successMsg;
                            if (currentPuzzleIndex < wordlePuzzles.length - 1) {
                                let continueBtn = document.createElement("button");
                                continueBtn.innerText = "Next Word";
                                continueBtn.onclick = function () {
                                    currentPuzzleIndex++;
                                    messageP.style.color = "red";
                                    continueBtn.remove();
                                    loadPuzzle();
                                };
                                exp.appendChild(continueBtn);
                            }
                        } else if (guessCount >= 6) {
                            inputField.disabled = true;
                            submitButton.disabled = true;
                            messageP.innerText = "Out of attempts! Try again~";
                        }
                    };
                    break;
                case 4:
                    exp.style.backgroundColor = "#f0bbc4";
                    exp.innerHTML = `<h2>For you my pumpkin~</h2>
                <p>This rose will never wilt, just like my love for you.</p>
                <img src="roses.gif" alt="Roses" style="max-width:200px; display:block; margin:10px auto;">`;
                    addCloseButtonToDiv(exp);
                    break;
                case 5:
                    exp.innerHTML = `<h2>A wish for you, your highness</h2>
                <p>Enter your wish below and I'll do my best to make it come true.</p>
                <input type="text" id="message-input" placeholder="Your wish here"><br>
                <button id="send-wish-btn">Send Message</button>
                <p id="wish-feedback" style="color:red;"></p>`;
                    let messageInput = exp.querySelector("#message-input"),
                        sendWishBtn = exp.querySelector("#send-wish-btn"),
                        wishFeedback = exp.querySelector("#wish-feedback");
                    sendWishBtn.onclick = function () {
                        let message = messageInput.value.trim();
                        if (!message) {
                            wishFeedback.innerText = "Please enter your message.";
                            return;
                        }
                        emailjs.send("service_efs5z2c", "template_dfg9jz8", {
                            message: message,
                            from_name: "71A",
                            to_email: "numbersbrotherhood@gmail.com"
                        })
                            .then(function (response) {
                                exp.innerHTML = `<h2>Wish Sent!</h2>
                      <p>Your wish: "${message}" has been sent successfully!</p>`;
                                addCloseButtonToDiv(exp);
                            })
                            .catch(function (error) {
                                wishFeedback.innerText = "There was an error sending your message. Please try again.";
                            });
                    };
                    addCloseButtonToDiv(exp);
                    break;
                case 6:
                    exp.innerHTML = `<h2>Oopsies~ slipped outta my hands...</h2>
                <p>Check your phone... I sent you a gift~!</p>`;
                    addCloseButtonToDiv(exp);
                    break;
                case 7:
                    exp.innerHTML = `
                <h2 style="font-weight: normal;">Will You Be My Valentine?</h2>
                <p style="max-width:600px; margin: 0 auto; line-height: 1.5;">
                  My dearest, your smile brightens every day and your love warms my heart. I hope you’ll say yes and make this day as special as you are.
                </p>
                <div id="valentine-buttons" style="display:flex; gap:20px; justify-content:center; margin:20px auto;">
                  <button id="valentine-yes" style="background-color: green; color: white; padding:10px 20px;">Yes</button>
                  <button id="valentine-no" style="background-color: red; color: white; padding:10px 20px;">No</button>
                </div>
                <img src="makesweet-hsunbb.gif" alt="Celebration" style="max-width:300px; display:block; margin:20px auto; background: none;">`;
                    (function () {
                        let yesClicks = 0;
                        const initYes = exp.querySelector("#valentine-yes");
                        const initNo = exp.querySelector("#valentine-no");
                        initNo.onclick = function () {
                            initNo.style.position = "absolute";
                            initNo.style.top = Math.random() * 80 + "%";
                            initNo.style.left = Math.random() * 80 + "%";
                        };
                        initYes.onclick = function () {
                            yesClicks++;
                            updateValentinePrompt();
                        };
                        function updateValentinePrompt() {
                            if (yesClicks === 1) {
                                exp.innerHTML = `
                      <h2 style="font-weight: normal;">Are you sure you feel the same?</h2>
                      <div id="valentine-buttons" style="display:flex; gap:20px; justify-content:center; margin:20px auto;">
                        <button id="valentine-yes" style="background-color: green; color: white; padding:10px 20px;">Yes</button>
                        <button id="valentine-no" style="background-color: red; color: white; padding:10px 20px;">No</button>
                      </div>
                      <img src="makesweet-hsunbb.gif" alt="Celebration" style="max-width:300px; display:block; margin:20px auto; background: none;">`;
                            } else if (yesClicks === 2) {
                                exp.innerHTML = `
                      <h2 style="font-weight: normal;">I cherish every moment with you.</h2>
                      <div id="valentine-buttons" style="display:flex; gap:20px; justify-content:center; margin:20px auto;">
                        <button id="valentine-yes" style="background-color: green; color: white; padding:10px 20px;">Yes</button>
                        <button id="valentine-no" style="background-color: red; color: white; padding:10px 20px;">No</button>
                      </div>
                      <img src="makesweet-hsunbb.gif" alt="Celebration" style="max-width:300px; display:block; margin:20px auto; background: none;">`;
                            } else if (yesClicks === 3) {
                                exp.innerHTML = `
                      <h2 style="font-weight: normal;">Please stay with me forever.</h2>
                      <div id="valentine-buttons" style="display:flex; gap:20px; justify-content:center; margin:20px auto;">
                        <button id="valentine-yes" style="background-color: green; color: white; padding:10px 20px;">Yes</button>
                        <button id="valentine-no" style="background-color: red; color: white; padding:10px 20px;">No</button>
                      </div>
                      <img src="makesweet-hsunbb.gif" alt="Celebration" style="max-width:300px; display:block; margin:20px auto; background: none;">`;
                            } else if (yesClicks === 4) {
                                exp.innerHTML = `
                      <p style="max-width:600px; margin:20px auto; line-height: 1.5;">
                        You are my sunshine on the cloudiest days, my calm in the chaos, and my reason to smile even when the world feels heavy. Every moment with you is a treasure, and every day I fall more in love with how you light up my life. You’re my heart, my home, and my forever. I love you more than words could ever say.
                      </p>`;
                                addCloseButtonToDiv(exp);
                                return;
                            }
                            const newYes = exp.querySelector("#valentine-yes");
                            const newNo = exp.querySelector("#valentine-no");
                            newNo.onclick = function () {
                                newNo.style.position = "absolute";
                                newNo.style.top = Math.random() * 80 + "%";
                                newNo.style.left = Math.random() * 80 + "%";
                            };
                            newYes.onclick = function () {
                                yesClicks++;
                                updateValentinePrompt();
                            };
                        }
                    })();
                    break;
                case 8:
                    exp.style.backgroundColor = "#fea8c5";
                    exp.innerHTML = `
                <h2>Spread your wings my princess</h2>
                <div style="display: flex; flex-wrap: wrap; align-items: center; justify-content: center;">
                  <img src="bear.gif" alt="Inspiration" style="max-width:200px; margin: 0 20px;">
                  <div style="max-width:600px; text-align: left;">
                    <p>My Beloved Mommy, My Nono, My Love,</p>
                    <p>I don’t think you realize just how much you’ve changed me. Before you, I was lost, unsure of who I was or where I was going. But then you came into my life, and everything changed. You’ve inspired me in ways I never thought possible. You’ve made me want to be better, not just for you, but for myself, too.</p>
                    <p>Nono, you’re my motivation. When I’m feeling down or unsure, I think of you, and suddenly, I feel like I can conquer the world. You’ve shown me what true strength looks like, what kindness really means, and what it feels like to be truly loved. You’ve taught me to dream bigger, to love harder, and to never give up, no matter how tough things get.</p>
                    <p>You’re my rock, my safe place, my everything. You’ve changed me for the better, and I’ll never be able to thank you enough for that. You’ve made me believe in love, in hope, and in the beauty of life. You’ve made me believe in us.</p>
                    <p>Nono, you’re my inspiration, my light, my guiding star. I’m so grateful for you, and I promise to always cherish you, support you, and love you with everything I have. You’re my queen, my pumpkin, my forever love, and I’m so lucky to have you in my life.</p>
                  </div>
                  <img src="bear.gif" alt="Inspiration" style="max-width:200px; margin: 0 20px;">
                </div>
              `;
                    addCloseButtonToDiv(exp);
                    break;
                case 9:
                    exp.style.backgroundColor = "#fed6e1";
                    exp.innerHTML = `
                <h2>It was fun, so you deserve a gift!</h2>
                <p>How about a video call? If you'd like, simply type "vid me" in the text box.</p>
                <div style="display: flex; flex-direction: column; align-items: center;">
                  <input type="text" id="video-input" placeholder="Type here">
                  <button id="video-submit">Submit</button>
                  <p id="video-feedback" style="color:red;"></p>
                </div>
                <div style="display: flex; align-items: center; justify-content: center;">
                  <img src="catty.gif" alt="Gift" style="max-width:200px; margin: 20px 0;">
                </div>
              `;
                    addCloseButtonToDiv(exp);
                    setTimeout(function () {
                        const videoBtn = exp.querySelector("#video-submit"),
                            videoInp = exp.querySelector("#video-input"),
                            videoFb = exp.querySelector("#video-feedback");
                        videoBtn.onclick = function () {
                            let txt = videoInp.value.trim().toLowerCase();
                            if (txt === "vid me") {
                                emailjs.send("service_efs5z2c", "template_dfg9jz8", {
                                    message: "Video call request: vid me",
                                    from_name: "71A",
                                    to_email: "numbersbrotherhood@gmail.com"
                                })
                                    .then(function (response) {
                                        exp.innerHTML = `
                          <h2>Great!</h2>
                          <p>I will video call you soon.</p>
                          <img src="catty.gif" alt="Gift" style="max-width:200px; margin: 20px 0;">
                        `;
                                        addCloseButtonToDiv(exp);
                                    })
                                    .catch(function (error) {
                                        videoFb.innerText = "There was an error sending your request.";
                                    });
                            } else {
                                videoFb.innerText = "Please type 'vid me' to confirm.";
                            }
                        };
                    }, 100);
                    break;
                default:
                    exp.innerHTML = `<p>Unknown envelope.</p>`;
                    addCloseButtonToDiv(exp);
            }
            document.body.appendChild(exp);
        }
        function startAdventure(div) {
            div.innerHTML += '<p>You’re on a sunny beach. Do you go left toward a mysterious forest or right toward a sparkling sea?</p>';
            let leftBtn = document.createElement("button");
            leftBtn.innerText = "Left (Forest)";
            leftBtn.onclick = function () { adventureLeft(div); };
            let rightBtn = document.createElement("button");
            rightBtn.innerText = "Right (Sea)";
            rightBtn.onclick = function () { adventureRight(div); };
            div.appendChild(leftBtn);
            div.appendChild(rightBtn);
        }
        function adventureLeft(div) {
            div.innerHTML = '<h2>Adventure Game - Forest</h2><p>You enter the forest and come to a fork in the road. Do you take the path leading to a quiet river or venture toward a mysterious cave?</p>';
            let riverBtn = document.createElement("button");
            riverBtn.innerText = "River";
            riverBtn.onclick = function () { leftRiver(div); };
            let caveBtn = document.createElement("button");
            caveBtn.innerText = "Cave";
            caveBtn.onclick = function () { leftCave(div); };
            div.appendChild(riverBtn);
            div.appendChild(caveBtn);
        }
        function leftRiver(div) {
            div.innerHTML = '<h2>Adventure Game - River</h2><p>At the river, you see both a small boat and a winding path along the riverbank. Which do you choose?</p>';
            let boatBtn = document.createElement("button");
            boatBtn.innerText = "Boat";
            boatBtn.onclick = function () { leftRiverBoat(div); };
            let bankBtn = document.createElement("button");
            bankBtn.innerText = "Riverbank";
            bankBtn.onclick = function () { leftRiverBank(div); };
            div.appendChild(boatBtn);
            div.appendChild(bankBtn);
        }
        function leftRiverBoat(div) {
            div.innerHTML = '<h2>Adventure Outcome</h2><p>The boat takes you to a secret island. Do you explore the island or relax on the beach?</p>';
            let exploreBtn = document.createElement("button");
            exploreBtn.innerText = "Explore Island";
            exploreBtn.onclick = function () { leftIslandExplore(div); };
            let relaxBtn = document.createElement("button");
            relaxBtn.innerText = "Relax on Beach";
            relaxBtn.onclick = function () { leftIslandRest(div); };
            div.appendChild(exploreBtn);
            div.appendChild(relaxBtn);
        }
        function leftIslandExplore(div) {
            div.innerHTML = '<h2>Island Adventure</h2><p>You explore the island and discover hidden caves, exotic fruits, and mysterious ruins. The island whispers secrets of love and magic with every step.</p>';
            addCloseButtonToDiv(div);
        }
        function leftIslandRest(div) {
            div.innerHTML = '<h2>Beach Relaxation</h2><p>You choose to relax on the pristine beach. The sound of the waves and the warmth of the sun remind you that sometimes the best adventure is to simply unwind.</p>';
            addCloseButtonToDiv(div);
        }
        function leftRiverBank(div) {
            div.innerHTML = '<h2>Adventure Outcome</h2><p>Walking along the riverbank, you find a rare, beautiful flower—symbolic of our bond. No matter where you go, I’ll always be with you.</p>';
            addCloseButtonToDiv(div);
        }
        function leftCave(div) {
            div.innerHTML = '<h2>Adventure Game - Cave</h2><p>Inside the cave, shimmering crystals and a mysterious inscription beckon you. Do you decipher the inscription or venture deeper?</p>';
            let insBtn = document.createElement("button");
            insBtn.innerText = "Decipher Inscription";
            insBtn.onclick = function () { leftCaveInscription(div); };
            let deepBtn = document.createElement("button");
            deepBtn.innerText = "Venture Deeper";
            deepBtn.onclick = function () { leftCaveDeeper(div); };
            div.appendChild(insBtn);
            div.appendChild(deepBtn);
        }
        function leftCaveInscription(div) {
            div.innerHTML = '<h2>Adventure Outcome</h2><p>You decipher the inscription and uncover a riddle that speaks of eternal love.</p>';
            addCloseButtonToDiv(div);
        }
        function leftCaveDeeper(div) {
            div.innerHTML = '<h2>Adventure Outcome</h2><p>Venturing deeper, you find a mystical artifact that glows warmly—just like the light of our love guiding you.</p>';
            addCloseButtonToDiv(div);
        }
        function adventureRight(div) {
            div.innerHTML = '<h2>Adventure Game - Sea</h2><p>You stroll along the sparkling sea and meet a friendly dolphin. Do you follow the dolphin or explore a message in a bottle?</p>';
            let dolBtn = document.createElement("button");
            dolBtn.innerText = "Follow Dolphin";
            dolBtn.onclick = function () { rightDolphin(div); };
            let botBtn = document.createElement("button");
            botBtn.innerText = "Explore Bottle";
            botBtn.onclick = function () { rightBottle(div); };
            div.appendChild(dolBtn);
            div.appendChild(botBtn);
        }
        function rightDolphin(div) {
            div.innerHTML = '<h2>Adventure Game - Dolphin</h2><p>The dolphin leads you to a vibrant coral reef. Do you choose to swim among the corals or simply admire the beauty from the shore?</p>';
            let swimBtn = document.createElement("button");
            swimBtn.innerText = "Swim";
            swimBtn.onclick = function () { rightDolphinSwim(div); };
            let admBtn = document.createElement("button");
            admBtn.innerText = "Admire";
            admBtn.onclick = function () { rightDolphinAdmire(div); };
            div.appendChild(swimBtn);
            div.appendChild(admBtn);
        }
        function rightDolphinSwim(div) {
            div.innerHTML = '<h2>Adventure Outcome</h2><p>Swimming among the corals, you’re surrounded by a kaleidoscope of colors—echoing the joy you bring into my life.</p>';
            addCloseButtonToDiv(div);
        }
        function rightDolphinAdmire(div) {
            div.innerHTML = '<h2>Adventure Outcome</h2><p>From the shore, you admire the breathtaking coral reef and read a message on a stone: "No matter where you go, I’m always with you."</p>';
            addCloseButtonToDiv(div);
        }
        function rightBottle(div) {
            div.innerHTML = '<h2>Adventure Game - Bottle</h2><p>You open a bottle and find a mysterious map. Do you follow it or leave the mystery as is?</p>';
            let folBtn = document.createElement("button");
            folBtn.innerText = "Follow Map";
            folBtn.onclick = function () { rightBottleFollowMap(div); };
            let mysBtn = document.createElement("button");
            mysBtn.innerText = "Leave Mystery";
            mysBtn.onclick = function () { rightBottleMystery(div); };
            div.appendChild(folBtn);
            div.appendChild(mysBtn);
        }
        function rightBottleFollowMap(div) {
            div.innerHTML = '<h2>Adventure Outcome</h2><p>Following the map, you arrive at a secret clearing. A mysterious envelope lies on a stone. Do you pick it up or leave it?</p>';
            let pickBtn = document.createElement("button");
            pickBtn.innerText = "Pick it up";
            pickBtn.onclick = function () { rightBottleEnvelope(div); };
            let leaveBtn = document.createElement("button");
            leaveBtn.innerText = "Leave it";
            leaveBtn.onclick = function () { rightBottleLeave(div); };
            div.appendChild(pickBtn);
            div.appendChild(leaveBtn);
        }
        function rightBottleEnvelope(div) {
            div.innerHTML = '<h2>Mystery Revealed</h2><p>You pick up the envelope and find a heartfelt note: "Every mystery is a reminder of our endless love."</p>';
            addCloseButtonToDiv(div);
        }
        function rightBottleLeave(div) {
            div.innerHTML = '<h2>Enigmatic Choice</h2><p>You decide to leave the envelope, letting the mystery linger. Sometimes, not knowing is part of the magic.</p>';
            addCloseButtonToDiv(div);
        }
        document.addEventListener("DOMContentLoaded", function () {
            const header = document.createElement("h1");
            header.style.textAlign = "center";
            header.innerText = "Love Advent Calendar";
            document.body.insertBefore(header, document.getElementById("envelopes-container"));
            for (let i = 0; i < 10; i++) {
                let env = document.createElement("div");
                const unlockDate = new Date(new Date().getFullYear(), 1, 7 + i);
                env.classList.add("envelope");
                env.setAttribute("data-unlock", unlockDate.getTime());
                let now = new Date();
                let label = now < unlockDate
                    ? `OPENS ON: ${unlockDate.toLocaleString("en-US", { month: "short" }).toUpperCase()}, ${getOrdinal(unlockDate.getDate())}`
                    : "Open now";
                env.innerHTML = `<div class="envelope-label">${label}</div>`;
                env.onclick = function () {
                    const nowClick = new Date();
                    if (nowClick < unlockDate) {
                        alert("This envelope will unlock on " + unlockDate.toLocaleDateString());
                        return;
                    }
                    if (currentEnvelope) return;
                    currentEnvelope = this;
                    this.classList.add("open");
                    setTimeout(() => { openEnvelope(i); }, 500);
                };
                document.getElementById("envelopes-container").appendChild(env);
            }
            document.addEventListener('click', function () {
                var bgMusic = document.getElementById('bg-music');
                if (bgMusic && bgMusic.paused) {
                    bgMusic.play().catch(function (e) {
                        console.log("Music playback failed:", e);
                    });
                }
            }, { once: true });
        });
        function getOrdinal(n) {
            let s = ["th", "st", "nd", "rd"], v = n % 100;
            return n + (s[(v - 20) % 10] || s[v] || s[0]);
        }
        function updateEnvelopeLabels() {
            let envelopes = document.querySelectorAll(".envelope");
            envelopes.forEach(env => {
                let unlockTime = parseInt(env.getAttribute("data-unlock"));
                let unlockDate = new Date(unlockTime);
                let now = new Date();
                let labelDiv = env.querySelector(".envelope-label");
                if (now < unlockDate) {
                    labelDiv.innerText = `OPENS ON: ${unlockDate.toLocaleString("en-US", { month: "short" }).toUpperCase()}, ${getOrdinal(unlockDate.getDate())}`;
                } else {
                    labelDiv.innerText = "Open now";
                }
            });
            requestAnimationFrame(updateEnvelopeLabels);
        }
        requestAnimationFrame(updateEnvelopeLabels);
    </script>
    <style>
        body {
            background-color: #ffe6e6;
            margin: 0;
            padding: 20px;
            font-family: monospace;
        }

        img {
            border: none !important;
            background: none !important;
            box-shadow: none !important;
            max-width: 100%;
            height: auto;
        }

        #envelopes-container {
            display: grid;
            grid-template-columns: repeat(5, auto);
            gap: 10px;
            justify-content: center;
            margin-top: 80px;
        }

        .envelope {
            position: relative;
            width: 220px;
            height: 160px;
            background: #d32f2f;
            border: 2px solid #b71c1c;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.5s ease-in-out;
            transform-style: preserve-3d;
            perspective: 500px;
            overflow: hidden;
        }

            .envelope:hover {
                transform: scale(1.1);
            }

            .envelope::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 50%;
                background: #e53935;
                clip-path: polygon(0 0, 50% 100%, 100% 0);
                transform-origin: top center;
                transition: transform 0.5s ease-in-out;
            }

            .envelope.open::before {
                transform: perspective(500px) rotateX(-180deg);
            }

        .envelope-label {
            position: absolute;
            bottom: 10px;
            width: 100%;
            text-align: center;
            font-size: 16px;
        }

        .expanded {
            position: fixed;
            width: 100vw;
            height: 100vh;
            background: white;
            top: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            text-align: center;
            padding: 20px;
            animation: fadeIn 0.5s ease-in-out;
            overflow-y: auto;
            z-index: 2000;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        button {
            background-color: #1976d2;
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            margin: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }

            button:hover {
                background-color: #1565c0;
            }

        .letter-box {
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            border: 2px solid #ccc;
        }

        input[type="text"] {
            padding: 8px;
            font-size: 16px;
            margin: 10px;
            width: 90%;
            max-width: 300px;
        }

        #gif-row img {
            width: 300px;
            height: auto;
        }

        @media (max-width: 600px) {
            #envelopes-container {
                grid-template-columns: repeat(2, 1fr);
            }

            .envelope {
                width: 150px;
                height: 110px;
            }

            .envelope-label {
                font-size: 14px;
            }

            button {
                padding: 8px 16px;
                font-size: 14px;
            }

            h1 {
                font-size: 24px;
            }

            .expanded {
                font-size: 16px;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div id="envelopes-container"></div>
    <div id="gif-row" style="display:flex; justify-content:center; gap:10px; margin-top:20px;">
        <img src="Happy_Duck.gif" alt="Happy Duck">
        <img src="Happy_Duck.gif" alt="Happy Duck">
        <img src="Happy_Duck.gif" alt="Happy Duck">
    </div>
    <audio id="bg-music" autoplay loop>
        <source src="Love_Jazz.mp3" type="audio/mpeg">
    </audio>
</body>
</html>
